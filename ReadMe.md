# eShop

An e-commerce application applying micro-services architecture.

## Services

| Name                 | Framework                                                                                                    | Database                                                                                                                                                                                                                                                       |
| -------------------- | ------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Catalog Service      | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Basket Service       | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white) ![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white) |
| Payment Service      | ![Django](https://img.shields.io/badge/django-%23092E20.svg?style=for-the-badge&logo=django&logoColor=white) | ![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)                                                                                                                                           |
| Notification Service | ![.Net](https://img.shields.io/badge/.NET-5C2D91?style=for-the-badge&logo=.net&logoColor=white)              | ![MongoDB](https://img.shields.io/badge/MongoDB-%234ea94b.svg?style=for-the-badge&logo=mongodb&logoColor=white)                                                                                                                                                |
| Vendor Service       | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Discount Service     | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Coupon Service       | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Ordering Service     | ![.Net](https://img.shields.io/badge/.NET-5C2D91?style=for-the-badge&logo=.net&logoColor=white)              | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Review Service       | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Storage Service      | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |
| Currency Service     | ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) | ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)                                                                                                           |

## Front-ends

| Name                    | Technology                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Customer web client     | ![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB) ![Redux](https://img.shields.io/badge/redux-%23593d88.svg?style=for-the-badge&logo=redux&logoColor=white) ![React Router](https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white) ![Ant-Design](https://img.shields.io/badge/-AntDesign-%230170FE?style=for-the-badge&logo=ant-design&logoColor=white)          |
| Vendor web client       | ![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB) ![Redux](https://img.shields.io/badge/redux-%23593d88.svg?style=for-the-badge&logo=redux&logoColor=white) ![React Router](https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white) ![MUI](https://img.shields.io/badge/MUI-%230081CB.svg?style=for-the-badge&logo=material-ui&logoColor=white)                   |
| Adminstrator web client | ![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB) ![Redux](https://img.shields.io/badge/redux-%23593d88.svg?style=for-the-badge&logo=redux&logoColor=white) ![React Router](https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white)  ![TailwindCSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white) |

## Others

| Name                        | Technology                                                                                                          |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| Containers managing         | ![Docker](https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white)               |
| API Gateway                 | Kong Gateway                                                                                                        |
| Async Communication (M2M)   | ![RabbitMQ](https://img.shields.io/badge/rabbitmq-%23FF6600.svg?&style=for-the-badge&logo=rabbitmq&logoColor=white) |
| Sync Communication (M2M)    | gRPC                                                                                                                |
| Identity Provider           | Auth0                                                                                                               |
| Payment                     | ![Stripe](https://img.shields.io/badge/Stripe-626CD9?style=for-the-badge&logo=Stripe&logoColor=white)               |
| CI/CD Pipeline              | ![GitLab](https://img.shields.io/badge/gitlab-%23181717.svg?style=for-the-badge&logo=gitlab&logoColor=white)        |
| Storage and Shared Database | ![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)          |

## Architecture

![architecture](./assets/eshop-architecture.png)

## Prerequisites

  1. [Docker Desktop](https://www.docker.com/products/docker-desktop)
  2. [AWS S3 credentials](https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html)
  3. [Stripe publishable and secret keys](https://www.appinvoice.com/en/s/documentation/how-to-get-stripe-publishable-key-and-secret-key-23)
  4. [Currency exchange rate API key](http://api.exchangeratesapi.io)
  5. [Auth0 client-id, domain and scope](https://auth0.com/blog/complete-guide-to-react-user-authentication/)
  6. Switch to Linux containers **on Windows only** ![Switch daemon](./assets/switchdaemon.png)

## Optionals

  1. Unix kernel environment (Windows users can use [WSL2](https://docs.microsoft.com/en-us/windows/wsl/about))
  2. Shell terminal

## Instructions

  1. Open your terminal (shell for the sake of simplicity)
  2. Change directory to this repository: `cd eshop`
  3. Export environment variables:
     1. `export AWS_REGION=your-aws-credentials`
     2. `export AWS_ACCESS_KEY_ID=your-aws-credentials`
     3. `export AWS_SECRET_ACCESS_KEY=your-aws-credentials`
     4. `export AWS_BUCKET=your-aws-credentials`
     5. `export STRIPE_PUBLISHABLE_KEY=your-stripe-credentials`
     6. `export STRIPE_SECRET_KEY=your-stripe-credentials`
     7. `export EXCHANGE_RATE_API_KEY=your-exchange-api-key`
     8. `export AUTH0_CLIENT_ID=your-auth0-credentials`
     9. `export AUTH0_DOMAIN=your-auth0-credentials`
     10. `export AUTH0_SCOPE=your-auth0-credentials`
  4. Start PostgreSQL: `docker compose up postgres -d`
  5. Initialize databases for PostgreSQL: `docker exec -it $(docker ps -f name="eshop-postgres*" -q) ./import-databases.sh`
  6. **This step is just required for the first run**, build projects:
     1. `docker compose build catalog-service basket-service review-service`
     2. `docker compose build storage-service vendor-service currency-service`
     3. `docker compose build discount-service coupon-service`
  7. Start all containers: `docker compose up -d`
  8. Navigate to:
     1. [Customer web client](http://localhost:3000)
     2. [Vendor web client](http://localhost:3001)
     3. [Administration web client](http://localhost:3002)
